# ğŸ”„ è®¤è¯ç³»ç»Ÿè¿ç§»æŒ‡å—

## ğŸ“‹ è¿ç§»æ¦‚è¿°

ç”±äº Vercel éƒ¨ç½²æ—¶çš„æ•°æ®åº“è¿æ¥é—®é¢˜ï¼Œæˆ‘ä»¬å°†è®¤è¯ç³»ç»Ÿä»æ•°æ®åº“é©±åŠ¨è¿ç§»åˆ°äº†å†…å­˜ä¸­çš„ç®€å•è®¤è¯ç³»ç»Ÿã€‚è¿™ä¸ªè¿ç§»ç¡®ä¿äº†ï¼š

- âœ… æ— éœ€æ•°æ®åº“è¿æ¥
- âœ… åœ¨ Vercel ä¸Šæ­£å¸¸å·¥ä½œ
- âœ… ä¿æŒæ‰€æœ‰åŸæœ‰åŠŸèƒ½
- âœ… æ”¯æŒæ‰‹æœºç«¯ç™»å½•æ³¨å†Œ

## ğŸ”§ ä¸»è¦å˜æ›´

### 1. è®¤è¯ç³»ç»Ÿå˜æ›´

- **åŸæ¥**: ä½¿ç”¨ Prisma + PostgreSQL æ•°æ®åº“
- **ç°åœ¨**: ä½¿ç”¨å†…å­˜ä¸­çš„ç®€å•è®¤è¯ç³»ç»Ÿ (`simple-auth.ts`)

### 2. è¡Œç¨‹ç³»ç»Ÿå˜æ›´

- **åŸæ¥**: ä½¿ç”¨æ•°æ®åº“å­˜å‚¨è¡Œç¨‹æ•°æ®
- **ç°åœ¨**: ä½¿ç”¨å†…å­˜ä¸­çš„ç®€å•è¡Œç¨‹ç³»ç»Ÿ (`simple-itinerary.ts`)

### 3. æ•°æ®æŒä¹…åŒ–

- **åŸæ¥**: æ•°æ®å­˜å‚¨åœ¨æ•°æ®åº“ä¸­
- **ç°åœ¨**: æ•°æ®å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼ˆé‡å¯åä¼šé‡ç½®ä¸ºé»˜è®¤æ•°æ®ï¼‰

## ğŸš€ å¦‚ä½•ä½¿ç”¨

### ç™»å½•ç³»ç»Ÿ

ç°åœ¨ä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹é»˜è®¤è´¦æˆ·ç™»å½•ï¼š

| é‚®ç®±                | å¯†ç      | ç”¨æˆ·å   | è¯´æ˜           |
| ------------------- | -------- | -------- | -------------- |
| `admin@example.com` | `123456` | ç®¡ç†å‘˜   | ç³»ç»Ÿç®¡ç†å‘˜è´¦æˆ· |
| `test@example.com`  | `123456` | æµ‹è¯•ç”¨æˆ· | æµ‹è¯•è´¦æˆ·       |
| `demo@example.com`  | `123456` | æ¼”ç¤ºç”¨æˆ· | æ¼”ç¤ºè´¦æˆ·       |
| `user@example.com`  | `123456` | æ™®é€šç”¨æˆ· | æ™®é€šç”¨æˆ·è´¦æˆ·   |

### æ³¨å†Œæ–°ç”¨æˆ·

1. è®¿é—® `/auth/signup` é¡µé¢
2. å¡«å†™ç”¨æˆ·ä¿¡æ¯
3. æ³¨å†ŒæˆåŠŸåè‡ªåŠ¨è·³è½¬åˆ°ç™»å½•é¡µé¢
4. ä½¿ç”¨æ–°è´¦æˆ·ç™»å½•

### ç”¨æˆ·èµ„æ–™ç®¡ç†

- æ”¯æŒæ›´æ–°å¤´åƒã€ä¸ªäººä¿¡æ¯
- æ”¯æŒè®¾ç½®åå¥½
- æ‰€æœ‰æ•°æ®å­˜å‚¨åœ¨å†…å­˜ä¸­

## ğŸ“ æ–‡ä»¶ç»“æ„

```
src/lib/
â”œâ”€â”€ simple-auth.ts          # ç®€å•è®¤è¯ç³»ç»Ÿ
â”œâ”€â”€ simple-itinerary.ts     # ç®€å•è¡Œç¨‹ç³»ç»Ÿ
â”œâ”€â”€ auth.ts                 # NextAuthé…ç½®ï¼ˆä½¿ç”¨ç®€å•è®¤è¯ï¼‰
â”œâ”€â”€ api/
â”‚   â””â”€â”€ simple-database.ts  # ç®€å•æ•°æ®åº“æ“ä½œæ¥å£
â””â”€â”€ hooks/
    â””â”€â”€ useAuth.ts          # è®¤è¯Hookï¼ˆæ— éœ€ä¿®æ”¹ï¼‰
```

## ğŸ”„ è¿ç§»æ­¥éª¤

### 1. æ›´æ–°å¯¼å…¥

å¦‚æœä½ çš„ä»£ç ä¸­æœ‰ä»¥ä¸‹å¯¼å…¥ï¼Œéœ€è¦æ›´æ–°ï¼š

```typescript
// åŸæ¥
import { userOperations } from '@/lib/api/database'

// ç°åœ¨
import { userOperations } from '@/lib/api/simple-database'
```

### 2. è®¤è¯ç›¸å…³ API

æ‰€æœ‰è®¤è¯ç›¸å…³çš„ API éƒ½ä¿æŒä¸å˜ï¼š

```typescript
// ç™»å½•
const result = await signIn('credentials', {
  email: 'test@example.com',
  password: '123456',
  redirect: false,
})

// è·å–ç”¨æˆ·ä¿¡æ¯
const { data: session } = useSession()

// ç™»å‡º
await signOut()
```

### 3. ç”¨æˆ·æ“ä½œ

ç”¨æˆ·æ“ä½œæ¥å£ä¿æŒä¸å˜ï¼š

```typescript
import { userOperations } from '@/lib/api/simple-database'

// æŸ¥æ‰¾ç”¨æˆ·
const user = await userOperations.findByEmail(email)

// æ›´æ–°ç”¨æˆ·
const updatedUser = await userOperations.update(userId, updateData)

// æ›´æ–°å¤´åƒ
await userOperations.updateAvatar(userId, avatarUrl)
```

### 4. è¡Œç¨‹æ“ä½œ

è¡Œç¨‹æ“ä½œæ¥å£ä¿æŒä¸å˜ï¼š

```typescript
import { itineraryOperations } from '@/lib/api/simple-database'

// è·å–ç”¨æˆ·è¡Œç¨‹
const itineraries = await itineraryOperations.findByUserId(userId)

// åˆ›å»ºè¡Œç¨‹
const newItinerary = await itineraryOperations.create(itineraryData)

// åˆ é™¤è¡Œç¨‹
await itineraryOperations.delete(itineraryId)
```

## ğŸ› ï¸ å¼€å‘è°ƒè¯•

### æŸ¥çœ‹å½“å‰ç”¨æˆ·

```typescript
import { simpleAuthManager } from '@/lib/simple-auth'

// è·å–æ‰€æœ‰ç”¨æˆ·
const users = await simpleAuthManager.getAllUsers()
console.log('å½“å‰ç”¨æˆ·:', users)

// è°ƒè¯•è·å–æ‰€æœ‰ç”¨æˆ·ï¼ˆåŒ…å«å¯†ç ï¼‰
const allUsers = simpleAuthManager.debugGetAllUsers()
console.log('è°ƒè¯•ç”¨æˆ·æ•°æ®:', allUsers)
```

### é‡ç½®ç³»ç»Ÿ

```typescript
import { simpleAuthManager } from '@/lib/simple-auth'

// æ¸…ç©ºæ‰€æœ‰ç”¨æˆ·
simpleAuthManager.clearUsers()

// é‡ç½®ä¸ºé»˜è®¤ç”¨æˆ·
simpleAuthManager.resetToDefaults()
```

## ğŸ“± æ‰‹æœºç«¯æ”¯æŒ

### ç™»å½•é¡µé¢

- è®¿é—®: `https://your-domain.vercel.app/auth/signin`
- æ”¯æŒé‚®ç®±å¯†ç ç™»å½•
- æ”¯æŒ Google OAuth ç™»å½•ï¼ˆå¦‚æœé…ç½®äº†ï¼‰

### æ³¨å†Œé¡µé¢

- è®¿é—®: `https://your-domain.vercel.app/auth/signup`
- å¡«å†™ç”¨æˆ·ä¿¡æ¯
- æ³¨å†ŒæˆåŠŸåè‡ªåŠ¨è·³è½¬

### å“åº”å¼è®¾è®¡

- æ‰€æœ‰é¡µé¢éƒ½æ”¯æŒç§»åŠ¨ç«¯
- è§¦æ‘¸å‹å¥½çš„ç•Œé¢
- é€‚é…å„ç§å±å¹•å°ºå¯¸

## ğŸ”’ å®‰å…¨æ€§è¯´æ˜

### å¯†ç å­˜å‚¨

- ç®€å•è®¤è¯ç³»ç»Ÿä¸­å¯†ç ä»¥æ˜æ–‡å­˜å‚¨ï¼ˆä»…ç”¨äºå¼€å‘/æ¼”ç¤ºï¼‰
- ç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨åŠ å¯†å­˜å‚¨

### ä¼šè¯ç®¡ç†

- ä½¿ç”¨ NextAuth.js çš„ JWT ç­–ç•¥
- ä¼šè¯æœ‰æ•ˆæœŸ 30 å¤©
- æ”¯æŒè‡ªåŠ¨åˆ·æ–°

### æ•°æ®æŒä¹…åŒ–

- å½“å‰æ•°æ®å­˜å‚¨åœ¨å†…å­˜ä¸­
- æœåŠ¡å™¨é‡å¯åæ•°æ®ä¼šé‡ç½®
- å¦‚éœ€æŒä¹…åŒ–ï¼Œå¯ä»¥è€ƒè™‘ï¼š
  - ä½¿ç”¨ localStorageï¼ˆå®¢æˆ·ç«¯ï¼‰
  - ä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿå­˜å‚¨
  - ä½¿ç”¨å¤–éƒ¨å­˜å‚¨æœåŠ¡

## ğŸš¨ æ³¨æ„äº‹é¡¹

1. **æ•°æ®æŒä¹…åŒ–**: å½“å‰ç³»ç»Ÿæ•°æ®ä¸ä¼šæŒä¹…ä¿å­˜ï¼Œé‡å¯åä¼šé‡ç½®
2. **ç”¨æˆ·é™åˆ¶**: å†…å­˜å­˜å‚¨é™åˆ¶äº†ç”¨æˆ·æ•°é‡ï¼Œå»ºè®®ä¸è¶…è¿‡ 1000 ä¸ªç”¨æˆ·
3. **æ€§èƒ½**: å¯¹äºå¤§é‡ç”¨æˆ·ï¼Œå»ºè®®ä½¿ç”¨æ•°æ®åº“å­˜å‚¨
4. **ç”Ÿäº§ç¯å¢ƒ**: å½“å‰é…ç½®é€‚åˆå¼€å‘/æ¼”ç¤ºï¼Œç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨æ•°æ®åº“

## ğŸ”® æœªæ¥æ”¹è¿›

1. **æ•°æ®æŒä¹…åŒ–**: æ·»åŠ  localStorage æˆ–æ–‡ä»¶ç³»ç»Ÿå­˜å‚¨
2. **ç”¨æˆ·é™åˆ¶**: å¢åŠ ç”¨æˆ·æ•°é‡é™åˆ¶å’Œæ¸…ç†æœºåˆ¶
3. **æ€§èƒ½ä¼˜åŒ–**: æ·»åŠ ç¼“å­˜å’Œç´¢å¼•æœºåˆ¶
4. **å®‰å…¨æ€§**: æ·»åŠ å¯†ç åŠ å¯†å’ŒéªŒè¯æœºåˆ¶

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œå¯ä»¥ï¼š

1. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ä¿¡æ¯
2. æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—
3. ä½¿ç”¨è°ƒè¯•å·¥å…·æŸ¥çœ‹ç”¨æˆ·æ•°æ®
4. é‡ç½®ç³»ç»Ÿåˆ°é»˜è®¤çŠ¶æ€

---

_æœ€åæ›´æ–°æ—¶é—´: 2025 å¹´ 1 æœˆ_
